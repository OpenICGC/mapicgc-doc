{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\ud83d\uddfa  mapicgc-gl-js","text":"<p>La biblioteca MapICGC GL JS, creada com a envoltori de MapLibreGL, ofereix noves funcions espec\u00edfiques en un entorn ICGC. Simplifica el desenvolupament integrant caracter\u00edstiques com tessel\u00b7les vectorials i imatges satel\u00b7litals, i incorporar de manera inmediata estils, terrenys i dades ICGC.  Proporciona funcions documentades per la  creaci\u00f3 d'un visor complet i totalment personalitzable.</p>"},{"location":"#temari","title":"Temari","text":""},{"location":"#installacio","title":"Instal.laci\u00f3","text":"<ul> <li>1.1.Instal\u00b7laci\u00f3 via NPM</li> <li>1.1.Instal\u00b7laci\u00f3 via CDN</li> </ul>"},{"location":"#exemples","title":"Exemples","text":"<ul> <li>2.1.0.Mapa</li> <li>2.1.1.Afegir 3D</li> <li>2.1.2.Afegir 3D ICGC</li> <li>2.2.Afegir base</li> <li>2.3.Afegir capa d'imatge ICGC</li> <li>2.4.Afegir capa vector ICGC</li> <li>2.5.Afegir capa</li> <li>2.6.Afegir llistat de capes</li> <li>2.7.Afegir marcador</li> <li>2.8.Afegir control</li> <li>2.9.Afegir comparador</li> <li>2.10.Afegir logo</li> <li>2.11.Fetch dades</li> <li>2.12.Consulta d'elements</li> </ul>"},{"location":"#documentacio","title":"Documentaci\u00f3","text":"<ul> <li>3.1.Funcions</li> </ul>"},{"location":"#autor-i-contacte","title":"Autor i Contacte","text":"<p>Unitat Geostart, Institut Cartogr\u00e0fic i Geol\u00f2gic de Catalunya.</p>"},{"location":"1.1.Inst_npm/","title":"1.1. Via NPM","text":""},{"location":"1.1.Inst_npm/#installacio-amb-npm","title":"Instal\u00b7laci\u00f3 amb NPM","text":"<p>Si utilitzes npm (Node Package Manager) per gestionar les depend\u00e8ncies del teu projecte, segueix aquests passos:</p> <ol> <li> <p>Obre la teva terminal i navega fins al directori del teu projecte.</p> </li> <li> <p>Executa la seg\u00fcent comanda per instal\u00b7lar mapicgc-gl-js:</p> </li> </ol> <pre><code>npm install mapicgc-gl-js\n</code></pre> <p>Aix\u00f2 descarregar\u00e0 i instal\u00b7lar\u00e0 la llibreria al teu projecte.</p> <p>3.. Un cop completada la instal\u00b7laci\u00f3, pots importar la llibreria al teu codi:</p> <pre><code> const llibreria = require('mapicgc-gl-js'); //ES6\n</code></pre> <p>o</p> <pre><code>  import * as mapicgcgl from \"mapicgc-gl-js\"\n</code></pre> <p>Ara est\u00e0s llest per comen\u00e7ar a utilitzar mapicgc-gl-js, seguint l'exemple seg\u00fcent:</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple llibreria mapicgc-gl-js&lt;/title&gt;\n    &lt;meta\n      name=\"viewport\"\n      content=\"initial-scale=1,maximum-scale=1,user-scalable=no\"\n    /&gt;\n    &lt;link\n      href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"\n      rel=\"stylesheet\"\n    /&gt;\n  &lt;/head&gt;\n  &lt;body type=\"module\"&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      import { Map } from \"mapicgc-gl-js\";\n\n      const map = mapicgcgl.Map({\n        container: \"map\",\n        style: mapicgcgl.Styles.TOPO,\n        center: [2.1464, 41.306],\n        zoom: 7.4,\n        maxZoom: 14,\n        hash: true,\n        pitch: 0,\n        attributionControl: false,\n      });\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p> See the Pen    example-map-001 by unitatgeostart (@unitatgeostart)   on CodePen. </p>"},{"location":"1.2.Inst_cdn/","title":"1.2. Via CDN","text":""},{"location":"1.2.Inst_cdn/#installacio-amb-cdn","title":"Instal\u00b7laci\u00f3 amb CDN","text":"<p>Si prefereixes utilitzar un CDN per incorporar la llibreria al teu projecte, pots seguir aquests passos:</p> <ol> <li> <p>Obre la teva terminal i navega fins al directori del teu projecte.</p> </li> <li> <p>Afegir la seg\u00fcent l\u00ednia al teu fitxer HTML, generalment col\u00b7locada dins la secci\u00f3 <code>&lt;head&gt;</code>:</p> </li> </ol> <pre><code>&lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n&lt;link\n  href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\"\n  rel=\"stylesheet\"\n/&gt;\n</code></pre> <p>Aix\u00f2 carregar\u00e0 la llibreria directament des del CDN.    Ara est\u00e0s llest per utilitzar mapicgc-gl-js al teu projecte, seguint l'exemple seg\u00fcent:</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple llibreria mapicgc-gl-js&lt;/title&gt;\n    &lt;meta\n      name=\"viewport\"\n      content=\"initial-scale=1,maximum-scale=1,user-scalable=no\"\n    /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link\n      href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\"\n      rel=\"stylesheet\"\n    /&gt;\n    &lt;link\n      href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"\n      rel=\"stylesheet\"\n    /&gt;\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n        container: \"map\",\n        style: mapicgcgl.Styles.TOPO,\n        center: [2.1464, 41.306],\n        zoom: 7.4,\n        maxZoom: 14,\n        hash: true,\n        pitch: 0,\n        attributionControl: false,\n      });\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p> See the Pen    example-map-001 by unitatgeostart (@unitatgeostart)   on CodePen. </p>"},{"location":"2.1.0.Map/","title":"2.1.0.Mapa","text":""},{"location":"2.1.0.Map/#mapa","title":"Mapa","text":"<p>.Map(options)</p> <p> See the Pen    example-map-001 by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> Option 1 Option 2 Option 3 Option 4 Option 5 <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Mapa&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,\n              center: [2.1464, 41.306],\n              zoom: 7.4,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.1.1.AddTerrain/","title":"2.1.1.Afegir 3D","text":""},{"location":"2.1.1.AddTerrain/#afegir-3d","title":"Afegir 3D","text":"<p>.addTerrain(resolution, position)</p> <p> See the Pen    Exemple AddMarker by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir 3D&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n     const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,\n              center: [0.959, 42.201],\n              zoom: 13,\n              maxZoom: 14,\n              hash: true,\n              pitch: 80,\n               bearing: 40,\n              attributionControl: false,\n            });\n\n\n  map.addSource(\"terrainICGC-src\", {\n          type: \"raster-dem\",\n          tiles: [\"https://tilemaps.icgc.cat/tileserver/tileserver.php/terreny_icgc_2m_rgb/{z}/{x}/{y}.png\"],\n          tileSize: 512,\n          maxzoom: 16,\n\n  });\n  map.setTerrain({\n    source: \"terrainICGC-src\",\n    exaggeration: 2.5\n  });\n\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.1.2.AddICGCTerrain/","title":"2.1.2.Afegir 3D ICGC","text":""},{"location":"2.1.2.AddICGCTerrain/#afegir-3d-de-licgc","title":"Afegir 3D de l'ICGC","text":"<p>.addTerrainICGC(resolution, position)</p> <p> See the Pen    Untitled by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir 3D de l'ICGC&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.ORTO,\n             center: [0.959, 42.201],\n              zoom: 13,\n              maxZoom: 14,\n              hash: true,\n              pitch: 80,\n               bearing: 40,\n              attributionControl: false,\n            });\n\n\n    map.addTerrainICGC(mapicgcgl.Terrains.WORLD3M, 'bottom-right');\n\n\n\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.10.AddLogo/","title":"2.10.Afegir logo","text":""},{"location":"2.10.AddLogo/#afegir-un-logo","title":"Afegir un logo","text":"<p>.addLogo(options)</p> <p> See the Pen    Exemple AddMarker by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir logo&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n      #logos{\n        display: flex;\n        flex-direction: row;\n        bottom: 1px;\n        position: absolute;\n        left: 10px;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;div id=\"logos\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,\n              center: [2.1464, 41.306],\n              zoom: 7.4,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n      let options = {\n        id: \"icgcColorLogo\",\n        url: \"https://betaserver.icgc.cat/logos/ICGC_color_norma.svg\",\n        href: \"https://www.icgc.cat\",\n      };\n      map.addLogo(options);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.11.FetchData/","title":"2.11.Fetch dades","text":""},{"location":"2.11.FetchData/#fetch-dades","title":"Fetch dades","text":"<p>.fetchData(url, name, options)</p> <p> See the Pen    Exemple fetchData by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Fetch dades&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;nav id=\"menu-group\" class=\"filter-group\"&gt;&lt;/nav&gt;\n\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.LIGHT,\n              center: [1.808, 41.618],\n              zoom: 10,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n//options del paint son opcionals\n        let paintOptions = {\n           'line-color': 'green',\n          'line-width': 3,\n          'line-opacity': 1\n        }\n// si nom\u00e8s volem fer el fetch: \nmap.fetchData(\n        'https://analisi.transparenciacatalunya.cat/resource/pzaa-n72w.geojson',\n        'RutesMontserrat',\n        paintOptions)\n\n// si volem fer el fecth i afegir un checkbox tipus men\u00fa:\n      map.fetchDataAndMenu(\n        'https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.geojson',\n        'centres')\n\n\n\n\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.12.AddFeatureQuery/","title":"2.12.Consulta d'elements","text":""},{"location":"2.12.AddFeatureQuery/#consulta-delements","title":"Consulta d'elements","text":"<p>.addFeatureQuery(layer, options)</p> <p> See the Pen    Exemple Consulta d'elements by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Consulta d'elements&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;nav id=\"menu-group\" class=\"filter-group\"&gt;&lt;/nav&gt;\n\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.LIGHT,\n             center: [2.4436,41.5363 ],\n              zoom: 13,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n\n// si volem fer el fecth i afegir un checkbox tipus men\u00fa:\n      map.fetchDataAndMenu(\n        'https://analisi.transparenciacatalunya.cat/resource/8gmd-gz7i.geojson',\n        'centres')\n\n//indicar la capa i els par\u00e0metres a mostrar\nlet queryFields = ['alies', 'comarca']\n\nmap.addFeatureQuery('centres',queryFields)\n\n\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.2.AddBasemap/","title":"2.2.Afegir base","text":""},{"location":"2.2.AddBasemap/#afegir-un-mapa-base","title":"Afegir un mapa base","text":"<p>.addBasemapsICGC(baseLayers)</p> <p> See the Pen    addBasemapsICGC by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir mapa base ICGC&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;div id=\"basemap-group\" class=\"basemap-group\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      // add basemap\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,// &lt;-- add style basemap here\n              center: [2.1464, 41.306],\n              zoom: 7.4,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n\n//add multiple ICGC basemaps and get a style menu component \nlet basemapsicgc = [mapicgcgl.Styles.ORTO, mapicgcgl.Styles.TOPO]\nmap.addBasemapsICGC(basemapsicgc)\n\n//If you need to add basemaps from other sources, please follow the structure for each object\n    //   let baseLayers = [\n    //     {\n    //       id: 0,\n    //       value: \"Mapa est\u00e0ndard\",\n    //       label: \"icgc_mapa_estandard_general\",\n    //        url: \"https://geoserveis.icgc.cat/contextmaps/icgc_mapa_estandard_general.json\",\n    // image: \"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_mapa_estandard.png\",\n    //     },\n    //     {\n    //       id: 1,\n    //       value: \"Ortofotomapa h\u00edbrid\",\n    //       label: \"icgc_orto_hibrida\",\n    //         url: \"https://geoserveis.icgc.cat/contextmaps/icgc_orto_hibrida.json\",\n    // image: \"https://visors.icgc.cat/contextmaps/imatges_estil/icgc_orto_hibrida.png\",\n    //     },\n    //   ];\n    //   map.addBasemaps(baseLayers);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.3.AddImageLayerICGC/","title":"2.3.Afegir capa d'imatge ICGC","text":""},{"location":"2.3.AddImageLayerICGC/#afegir-una-capa-imatge-icgc","title":"Afegir una capa imatge ICGC","text":"<p>.addImageLayerICGC(layer)</p> <p> See the Pen    Exemple AddMarker by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir capa imatge ICGC&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,\n              center: [2.1464, 41.306],\n              zoom: 7.4,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n\n      map.addImageLayerICGC(mapicgcgl.Layers.Orto.ortofotoColor2013);   \n\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.4.AddVectorLayerICGC/","title":"2.4.Afegir capa vector ICGC","text":""},{"location":"2.4.AddVectorLayerICGC/#afegir-una-capa-vector-icgc","title":"Afegir una capa vector ICGC","text":"<p>.addVectorLayerICGC(layer)</p> <p> See the Pen    Exemple AddMarker by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir capa vector de l'ICGC&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,\n              center: [2.1464, 41.306],\n              zoom: 7.4,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n\n\n         map.addVectorLayerICGC(mapicgcgl.Layers.VectorAdmin.areesBasiquesServeisSocialsVigent)\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.5.AddLayer/","title":"2.5.Afegir capa","text":""},{"location":"2.5.AddLayer/#afegir-una-capa-per-sota-de-les-etiquetes","title":"Afegir una capa per sota de les etiquetes","text":"<p>.addLayer(layer)</p> <p>.addLayerGeoJSON(geojsonLayer)</p> <p>.addLayerWMS(wmsLayer)</p> <p> See the Pen    Exemple AddMarker by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir capa&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,\n              center: [2.1464, 41.306],\n              zoom: 7.4,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n\n//addSource i addLayer\nmap.on('load', () =&gt; {\nvar layers = map.getStyle().layers;\n        var firstSymbolId;\n        for (var i = 0; i &lt; layers.length; i++) {\n            if (layers[i].type === 'symbol') {\n                firstSymbolId = layers[i].id;\n                break;\n            }\n        }\n\n      map.addSource('urban-areas', {\n            'type': 'geojson',\n            'data':\n                'https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_urban_areas.geojson'\n        });\n        map.addLayer(\n            {\n                'id': 'urban-areas-fill',\n                'type': 'fill',\n                'source': 'urban-areas',\n                'layout': {},\n                'paint': {\n                    'fill-color': '#f08',\n                    'fill-opacity': 0.4\n                }\n\n            },\n            firstSymbolId\n        );\n\n//addLayerGeoJSON (fa el addSource i addLayer directament)\n      let geojsonLayer = {\n        id: \"geojsonTest\",\n        data: {\n          type: \"Feature\",\n          geometry: {\n            type: \"Polygon\",\n            coordinates: [\n              [\n                [1.3119, 41.489],\n                [1.0119, 41.489],\n                [1.0119, 42.0489],\n                [1.3119, 42.0489],\n              ],\n            ],\n          },\n        },\n        layerType: \"fill\",\n        layout: {},\n        paint: {\n          \"fill-color\": \"#088\",\n          \"fill-opacity\": 0.8,\n        },\n      };\n      map.addLayerGeoJSON(geojsonLayer);\n\n\n\n\n\n//addLayerWMS (fa el addSource i addLayer directament)\n      let wmsLayer = {\n        id: \"wms-test\",\n        tiles:\n          \"https://betaserver.icgc.cat/geoservice/194939610536528507705272100186218457502?service=WMS&amp;request=GetMap&amp;layers=swllH1905&amp;styles=&amp;format=image%2Fpng&amp;transparent=true&amp;version=1.1.1&amp;nom=swellHeight_20210903&amp;tipus=wms&amp;businessId=-1&amp;width=256&amp;height=256&amp;srs=EPSG%3A3857&amp;bbox={bbox-epsg-3857}\",\n      };\n      // map.addLayerWMS(wmsLayer);\n})\n\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.6.AddLayerTree/","title":"2.6.Afegir llistat de capes","text":""},{"location":"2.6.AddLayerTree/#afegir-un-arbre-de-capes","title":"Afegir un arbre de capes","text":"<p>.addLayerTree(options)</p> <p> See the Pen    Exemple AddMarker by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir arbre de capes&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n\n\n.filter-group {\n        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n        font-weight: 600;\n        position: absolute;\n        top: 10px;\n        left: 10px;\n        z-index: 1;\n        border-radius: 3px;\n        width: 170px;\n        color: #fff;\n    }\n\n\n      .filter-group input[type='checkbox']:checked + label:before {\n        content: '\u2714';\n        margin-right: 10px;\n    }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;nav id=\"filter-group\" class=\"filter-group\"&gt;&lt;/nav&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,\n              center: [2.1464, 41.306],\n              zoom: 6.4,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n          let options = {\n        features: {\n          type: \"FeatureCollection\",\n          features: [\n            {\n              type: \"Feature\",\n              properties: {\n                icon: \"Rub\u00ed\",\n              },\n              geometry: {\n                type: \"Point\",\n                coordinates: [2.0119, 41.489],\n              },\n            },\n\n            {\n              type: \"Feature\",\n              properties: {\n                icon: \"Moi\u00e0\",\n              },\n              geometry: {\n                type: \"Point\",\n                coordinates: [2.119, 41.87],\n              },\n            },\n            {\n              type: \"Feature\",\n              properties: {\n                icon: \"Les Borges Blanques\",\n              },\n              geometry: {\n                type: \"Point\",\n                coordinates: [0.97319, 41.4589],\n              },\n            },\n            {\n              type: \"Feature\",\n              properties: {\n                icon: \"Berga\",\n              },\n              geometry: {\n                type: \"Point\",\n                coordinates: [1.83, 42.163],\n              },\n            },\n          ],\n        },\n        id: \"testLayer\",\n        type: \"geojson\",\n      };\n      map.addLayerTree(options);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.7.AddMarker/","title":"2.7.Afegir marker","text":""},{"location":"2.7.AddMarker/#afegir-un-marcador","title":"Afegir un marcador","text":"<p>.addmarker(options)</p> <p> See the Pen    Exemple AddMarker by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir marcador&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,\n              center: [2.1464, 41.306],\n              zoom: 7.4,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n      let optionsMarker = {\n        coord: [2.119, 41.87],\n        text: \"Hola Test\",\n        textOffset: 25,\n        options: {},\n      };\n      map.addMarker(optionsMarker);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.8.AddControl/","title":"2.8.Afegir control","text":""},{"location":"2.8.AddControl/#afegir-un-control","title":"Afegir un control","text":"<p>.addControl(control,position)</p> <p> See the Pen    Exemple AddMarker by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir control&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n     &lt;link rel='stylesheet' href='https://unpkg.com/maplibre-gl@4.0.0/dist/maplibre-gl.css' /&gt;\n    &lt;script src='https://unpkg.com/maplibre-gl@4.0.0/dist/maplibre-gl.js'&gt;&lt;/script&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n      const map = new mapicgcgl.Map({\n              container: \"map\",\n              style: mapicgcgl.Styles.TOPO,\n              center: [2.1464, 41.306],\n              zoom: 7.4,\n              maxZoom: 14,\n              hash: true,\n              pitch: 0,\n              attributionControl: false,\n            });\n// mapicgc-gl-js library:\n        map.addGeolocateControl({\n                  positionOptions: {\n                      enableHighAccuracy: true\n                  },\n                  trackUserLocation: true\n              },\"bottom-right\")\n// from other library\n       map.addControl(new maplibregl.NavigationControl(), \"bottom-right\")\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"2.9.AddCompare/","title":"2.9.Afegir comparador","text":""},{"location":"2.9.AddCompare/#afegir-comparador","title":"Afegir comparador","text":"<p>.CompareMaps(options)</p> <p> See the Pen    CompareMaps by unitatgeostart (@unitatgeostart)   on CodePen. </p> <p>CodePen</p> <pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Exemple mapicgc-gl-js: Afegir comparador&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"initial-scale=1,maximum-scale=1,user-scalable=no\" /&gt;\n    &lt;script src=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"https://tilemaps.icgc.cat/cdn/mapicgc-gl-js/mapicgc-gl.css\" rel=\"stylesheet\" /&gt;\n\n    &lt;style&gt;\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      #map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%;\n      }\n      .map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        height: 100%\n      }\n\n\n\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n\n\n    &lt;div id=\"comparison-container\"&gt;\n        &lt;div id=\"before\" class=\"map\"&gt;&lt;/div&gt;\n        &lt;div id=\"after\" class=\"map\"&gt;&lt;/div&gt;\n      &lt;/div&gt;\n\n    &lt;script&gt;\n       const map1 = new mapicgcgl.Map({\n            container: 'before',\n            style: mapicgcgl.Styles.ORTO,\n            center: [1.1464, 41.706],\n            zoom: 7.4,\n            maxZoom: 14,\n            hash: true,\n            pitch: 0,\n            attributionControl: false\n        });\n\n        const map2 = new mapicgcgl.Map({\n            container: 'after',\n            style: mapicgcgl.Styles.TOPO,\n            center: [1.1464, 41.706],\n            zoom: 7.4,\n            maxZoom: 14,\n            hash: true,\n            pitch: 0,\n            attributionControl: false\n        });\n\n\n        var container = \"#comparison-container\";\n\n      var map =  new mapicgcgl.CompareMaps(map1, map2, container, {});\n\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"3.1.Funcions_doc/","title":"3.1.Funcions","text":""},{"location":"3.1.Funcions_doc/#functions","title":"Functions","text":"getStyle() \u2192 <code>Object</code> <p>Retrieves the current style of the map.</p> getConfigStyles() \u2192 <code>Array</code> <p>Retrieves the available base styles from default options.</p> getConfigWMSLayers() \u2192 <code>Array</code> <p>Retrieves the available WMS image layers from default options.</p> getConfigOrtoLayers() \u2192 <code>Array</code> <p>Retrieves the available orto image layers from default options.</p> getConfigVectorLayers() \u2192 <code>Array</code> <p>Retrieves the available vector layers from default options.</p> getConfigVectorAdminLayers() \u2192 <code>Array</code> <p>Retrieves the available vector layers from default options.</p> fetchData(url, name, options) <p>Fetches GeoJSON data from a URL and adds a corresponding layer to the map based on the specified geometry type.</p> fetchDataAndMenu(url, name, options) <p>Fetches GeoJSON data from a URL and adds a corresponding layer to the map based on the specified geometry type and adds to the Menu as a checkbox item.</p> fetchDataWithSearchbox(url, type, name, options) <p>Fetches GeoJSON data from a URL and adds a corresponding layer to the map based on the specified geometry type.</p> on(type, func) <p>Adds an event listener to the map.</p> getSource(source) <p>Retrieves the specified source from the map.</p> addSource(source, options) <p>Adds a source to the map.</p> setStyle(style, [options]) <p>Sets the style of the map.</p> getLayer(layerId) <p>Retrieves the layer with the specified ID from the map.</p> jumpTo(options) <p>Jumps to the specified coordinates and zoom on the map.</p> setLayoutProperty(object) <p>Sets layout property for a layer on the map.</p> addControl(control, [position]) <p>Adds a control to the map with the specified position.</p> getZoom() \u2192 <code>number</code> <p>Retrieves the current zoom level of the map.</p> addMouseCoordControl() <p>Adds a mouse coordinate control to the map.</p> addGeolocateControl(options, [position]) <p>Adds a geolocate control to the map.</p> getBounds() <p>Retrieves the bounds of the map.</p> getCenter() \u2192 <code>LngLat</code> <p>Retrieves the center coordinates of the map.</p> setTerrain(options) \u2192 <code>Object</code> <p>Sets terrain options for the map.</p> getCanvas() <p>Retrieves the canvas of the map.</p> setCenter(coordinates) <p>Sets the center of the map to the provided coordinates.</p> addLayer(layer) <p>Adds a layer to the map.</p> addLayerGeoJSON(layer) <p>Adds a GeoJSON layer to the map.</p> addLayerWMS(layer) <p>Adds a WMS layer to the map.</p> removeControl(control) <p>Removes a control from the map.</p> removeLayer(layerId) <p>Removes a layer from the map.</p> removeSource(layerId) <p>Removes a source from the map.</p> addLogo(options) <p>Adds a logo to the map.</p> addBasemapsICGC(baseLayers) <p>Adds base layers to the map.</p> addBasemaps(baseLayers) <p>Adds base layers to the map.</p> addFeatureQuery(layerName, options) <p>Adds feature query function to a layer.</p> addScaleControl(options, position) <p>Adds a scale control to the map.</p> <ul> <li>@function addScaleControl</li> </ul> removeMeasureControl() <p>Removes the measure control from the map.</p> addMeasureControl() <p>Adds a measure control to the map.</p> addExportControl(options, [position]) <p>Adds an export control to the map with the provided options and position.</p> addPopup(coordinates, text) <p>Adds a popup to the map.</p> addMarker(options) \u2192 <code>Object</code> <p>Adds a marker to the map.</p> addPopup(options, coord, text) \u2192 <code>Object</code> <p>Adds a popup to the map.</p> addFullScreen() <p>Adds a fullscreen control to the map.</p> addMenuItem(name) <p>Adds a menu item with a checkbox for controlling the visibility of a layer on the map.</p> addLayerTree(options) <p>Adds a layer tree to the map.</p> createNavigationControl(options, [position]) \u2192 <code>Object</code> <p>Creates a navigation control with the provided options.</p> addNavigationControl(options, [position]) <p>Adds a navigation control to the map with the provided options.</p> addAttributionControl(options) <p>Adds an attribution control to the map with the provided options.</p> _dealStyleMaps(name) \u2192 <code>string</code> <p>Internal method to handle map styles.</p> addImageLayerICGC(name, year) <p>Adds an ICGC image layer to the map based on the specified name and year.</p> addVectorLayerICGC(url, year) <p>Adds an ICGC vector layer to the map based on the specified name and year.</p> addTerrainICGC(resolution, [positionButton]) <p>Adds 3D terrain to the map using hillshade.</p> <p></p>"},{"location":"3.1.Funcions_doc/#getstyle-object","title":"getStyle() \u2192 <code>Object</code>","text":"<p>Retrieves the current style of the map.</p> <p>Kind: global function Returns: <code>Object</code> - - The current style of the map. </p>"},{"location":"3.1.Funcions_doc/#getconfigstyles-array","title":"getConfigStyles() \u2192 <code>Array</code>","text":"<p>Retrieves the available base styles from default options.</p> <p>Kind: global function Returns: <code>Array</code> - - Array containing the names of available base styles. </p>"},{"location":"3.1.Funcions_doc/#getconfigwmslayers-array","title":"getConfigWMSLayers() \u2192 <code>Array</code>","text":"<p>Retrieves the available WMS image layers from default options.</p> <p>Kind: global function Returns: <code>Array</code> - - Array containing the keys of available WMS image layers. </p>"},{"location":"3.1.Funcions_doc/#getconfigortolayers-array","title":"getConfigOrtoLayers() \u2192 <code>Array</code>","text":"<p>Retrieves the available orto image layers from default options.</p> <p>Kind: global function Returns: <code>Array</code> - - Array containing the keys of available image layers. </p>"},{"location":"3.1.Funcions_doc/#getconfigvectorlayers-array","title":"getConfigVectorLayers() \u2192 <code>Array</code>","text":"<p>Retrieves the available vector layers from default options.</p> <p>Kind: global function Returns: <code>Array</code> - - Array containing the keys of available vector layers. </p>"},{"location":"3.1.Funcions_doc/#getconfigvectoradminlayers-array","title":"getConfigVectorAdminLayers() \u2192 <code>Array</code>","text":"<p>Retrieves the available vector layers from default options.</p> <p>Kind: global function Returns: <code>Array</code> - - Array containing the keys of available vectorAdmin layers. </p>"},{"location":"3.1.Funcions_doc/#fetchdataurl-name-options","title":"fetchData(url, name, options)","text":"<p>Fetches GeoJSON data from a URL and adds a corresponding layer to the map based on the specified geometry type.</p> <p>Kind: global function  </p> Param Type Description url <code>string</code> The URL to fetch GeoJSON data from. name <code>string</code> The geometry name (e.g., 'buildings'). options <code>Object</code> Additional options for configuring the layer. <p></p>"},{"location":"3.1.Funcions_doc/#fetchdataandmenuurl-name-options","title":"fetchDataAndMenu(url, name, options)","text":"<p>Fetches GeoJSON data from a URL and adds a corresponding layer to the map based on the specified geometry type and adds to the Menu as a checkbox item.</p> <p>Kind: global function  </p> Param Type Description url <code>string</code> The URL to fetch GeoJSON data from. name <code>string</code> The geometry name (e.g., 'buildings'). options <code>Object</code> Additional options for configuring the layer. <p></p>"},{"location":"3.1.Funcions_doc/#fetchdatawithsearchboxurl-type-name-options","title":"fetchDataWithSearchbox(url, type, name, options)","text":"<p>Fetches GeoJSON data from a URL and adds a corresponding layer to the map based on the specified geometry type.</p> <p>Kind: global function  </p> Param Type Description url <code>string</code> The URL to fetch GeoJSON data from. type <code>string</code> The geometry type (e.g., 'line', 'polygon', 'point'). name <code>string</code> The geometry name (e.g., 'buildings'). options <code>Object</code> Additional options for configuring the layer. <p></p>"},{"location":"3.1.Funcions_doc/#ontype-func","title":"on(type, func)","text":"<p>Adds an event listener to the map.</p> <p>Kind: global function  </p> Param Type Description type <code>string</code> The type of the event. func <code>function</code> The callback function to be executed when the event occurs. <p></p>"},{"location":"3.1.Funcions_doc/#getsourcesource","title":"getSource(source)","text":"<p>Retrieves the specified source from the map.</p> <p>Kind: global function  </p> Param Type Description source <code>string</code> The ID of the source to retrieve. <p></p>"},{"location":"3.1.Funcions_doc/#addsourcesource-options","title":"addSource(source, options)","text":"<p>Adds a source to the map.</p> <p>Kind: global function  </p> Param Type Description source <code>string</code> The ID of the source to add. options <code>object</code> The source options. <p></p>"},{"location":"3.1.Funcions_doc/#setstylestyle-options","title":"setStyle(style, [options])","text":"<p>Sets the style of the map.</p> <p>Kind: global function  </p> Param Type Description style <code>string</code> Name of the map style. [options] <code>Object</code> Options for setting the style. <p></p>"},{"location":"3.1.Funcions_doc/#getlayerlayerid","title":"getLayer(layerId)","text":"<p>Retrieves the layer with the specified ID from the map.</p> <p>Kind: global function  </p> Param Type Description layerId <code>string</code> The ID of the layer to retrieve. <p></p>"},{"location":"3.1.Funcions_doc/#jumptooptions","title":"jumpTo(options)","text":"<p>Jumps to the specified coordinates and zoom on the map.</p> <p>Kind: global function  </p> Param Type Description options <code>Object</code> Coordinates and options to jump to: { center: [coordx, coordy], zoom: zoom, essential: true }. <p></p>"},{"location":"3.1.Funcions_doc/#setlayoutpropertyobject","title":"setLayoutProperty(object)","text":"<p>Sets layout property for a layer on the map.</p> <p>Kind: global function  </p> Param Type Description object <code>Object</code> Object containing layer ID and property to set. <p></p>"},{"location":"3.1.Funcions_doc/#addcontrolcontrol-position","title":"addControl(control, [position])","text":"<p>Adds a control to the map with the specified position.</p> <p>Kind: global function  </p> Param Type Default Description control <code>Object</code> The control to add. [position] <code>string</code> <code>\"'top-right'\"</code> Position to add the control on the map. <p></p>"},{"location":"3.1.Funcions_doc/#getzoom-number","title":"getZoom() \u2192 <code>number</code>","text":"<p>Retrieves the current zoom level of the map.</p> <p>Kind: global function Returns: <code>number</code> - - The current zoom level. </p>"},{"location":"3.1.Funcions_doc/#addmousecoordcontrol","title":"addMouseCoordControl()","text":"<p>Adds a mouse coordinate control to the map.</p> <p>Kind: global function </p>"},{"location":"3.1.Funcions_doc/#addgeolocatecontroloptions-position","title":"addGeolocateControl(options, [position])","text":"<p>Adds a geolocate control to the map.</p> <p>Kind: global function  </p> Param Type Default Description options <code>Object</code> Options for the geolocate control. [position] <code>string</code> <code>\"'top-right'\"</code> Position to add the control on the map. <p></p>"},{"location":"3.1.Funcions_doc/#getbounds","title":"getBounds()","text":"<p>Retrieves the bounds of the map.</p> <p>Kind: global function </p>"},{"location":"3.1.Funcions_doc/#getcenter-lnglat","title":"getCenter() \u2192 <code>LngLat</code>","text":"<p>Retrieves the center coordinates of the map.</p> <p>Kind: global function Returns: <code>LngLat</code> - - The center coordinates of the map. </p>"},{"location":"3.1.Funcions_doc/#setterrainoptions-object","title":"setTerrain(options) \u2192 <code>Object</code>","text":"<p>Sets terrain options for the map.</p> <p>Kind: global function Returns: <code>Object</code> - - Result of setting the terrain options.  </p> Param Type Description options <code>Object</code> Options for the terrain. <p></p>"},{"location":"3.1.Funcions_doc/#getcanvas","title":"getCanvas()","text":"<p>Retrieves the canvas of the map.</p> <p>Kind: global function </p>"},{"location":"3.1.Funcions_doc/#setcentercoordinates","title":"setCenter(coordinates)","text":"<p>Sets the center of the map to the provided coordinates.</p> <p>Kind: global function  </p> Param Type Description coordinates <code>Array</code> Coordinates to center the map: [1.3119, 41.489] <p></p>"},{"location":"3.1.Funcions_doc/#addlayerlayer","title":"addLayer(layer)","text":"<p>Adds a layer to the map.</p> <p>Kind: global function  </p> Param Type Description layer <code>Object</code> Options for the layer to add. <p></p>"},{"location":"3.1.Funcions_doc/#addlayergeojsonlayer","title":"addLayerGeoJSON(layer)","text":"<p>Adds a GeoJSON layer to the map.</p> <p>Kind: global function  </p> Param Type Description layer <code>Object</code> Options for the GeoJSON layer to add. layer.id <code>string</code> Unique identifier for the layer. layer.type <code>string</code> Type of layer ('geojson'). layer.data <code>Object</code> GeoJSON data for the layer. layer.layerType <code>string</code> Map layer type (e.g., 'symbol', 'circle', 'fill'). layer.layout <code>Object</code> Layer layout configuration. layer.paint <code>Object</code> Layer paint configuration. <p></p>"},{"location":"3.1.Funcions_doc/#addlayerwmslayer","title":"addLayerWMS(layer)","text":"<p>Adds a WMS layer to the map.</p> <p>Kind: global function  </p> Param Type Description layer <code>Object</code> Options for the WMS layer to add. layer.id <code>string</code> Unique identifier for the layer. layer.type <code>string</code> Type of layer ('raster'). layer.tiles <code>Array.&lt;string&gt;</code> Tiles for the raster layer. <p></p>"},{"location":"3.1.Funcions_doc/#removecontrolcontrol","title":"removeControl(control)","text":"<p>Removes a control from the map.</p> <p>Kind: global function  </p> Param Type Description control <code>Object</code> The control to remove. <p></p>"},{"location":"3.1.Funcions_doc/#removelayerlayerid","title":"removeLayer(layerId)","text":"<p>Removes a layer from the map.</p> <p>Kind: global function  </p> Param Type Description layerId <code>string</code> Identifier of the layer to remove. <p></p>"},{"location":"3.1.Funcions_doc/#removesourcelayerid","title":"removeSource(layerId)","text":"<p>Removes a source from the map.</p> <p>Kind: global function  </p> Param Type Description layerId <code>string</code> Identifier of the source to remove. <p></p>"},{"location":"3.1.Funcions_doc/#addlogooptions","title":"addLogo(options)","text":"<p>Adds a logo to the map.</p> <p>Kind: global function  </p> Param Type Description options <code>Object</code> Options for the logo to add. options.id <code>string</code> Unique identifier for the logo. options.url <code>string</code> URL of the logo image. options.href <code>string</code> URL to navigate to when the logo is clicked. <p></p>"},{"location":"3.1.Funcions_doc/#addbasemapsicgcbaselayers","title":"addBasemapsICGC(baseLayers)","text":"<p>Adds base layers to the map.</p> <p>Kind: global function  </p> Param Type Description baseLayers <code>Array.&lt;Object&gt;</code> Array of base layer objects. <p></p>"},{"location":"3.1.Funcions_doc/#addbasemapsbaselayers","title":"addBasemaps(baseLayers)","text":"<p>Adds base layers to the map.</p> <p>Kind: global function  </p> Param Type Description baseLayers <code>Array.&lt;Object&gt;</code> Array of base layer objects. baseLayers.label <code>string</code> Label for the base layer. baseLayers.image <code>string</code> URL of the image representing the base layer. baseLayers.url <code>string</code> URL of the base layer style. <p></p>"},{"location":"3.1.Funcions_doc/#addfeaturequerylayername-options","title":"addFeatureQuery(layerName, options)","text":"<p>Adds feature query function to a layer.</p> <p>Kind: global function  </p> Param Type Description layerName <code>string</code> name of the layer options <code>objetc</code> optional indications for the popup <p></p>"},{"location":"3.1.Funcions_doc/#addscalecontroloptions-position","title":"addScaleControl(options, position)","text":"<p>Adds a scale control to the map.  * @function addScaleControl</p> <p>Kind: global function  </p> Param Type Description options <code>Object</code> Options for configuring the scale control. position <code>string</code> The position on the map to place the scale control (e.g., 'top-left', 'bottom-right'). <p></p>"},{"location":"3.1.Funcions_doc/#removemeasurecontrol","title":"removeMeasureControl()","text":"<p>Removes the measure control from the map.</p> <p>Kind: global function </p>"},{"location":"3.1.Funcions_doc/#addmeasurecontrol","title":"addMeasureControl()","text":"<p>Adds a measure control to the map.</p> <p>Kind: global function </p>"},{"location":"3.1.Funcions_doc/#addexportcontroloptions-position","title":"addExportControl(options, [position])","text":"<p>Adds an export control to the map with the provided options and position.</p> <p>Kind: global function  </p> Param Type Description options <code>Object</code> | <code>string</code> Options for the export control or position if provided as a string. [position] <code>string</code> Position to place the export control (e.g., 'top-right'). <p></p>"},{"location":"3.1.Funcions_doc/#addpopupcoordinates-text","title":"addPopup(coordinates, text)","text":"<p>Adds a popup to the map.</p> <p>Kind: global function  </p> Param Type Description coordinates <code>array</code> Coordinates of the popup . text <code>string</code> Text content for the popup. <p></p>"},{"location":"3.1.Funcions_doc/#addmarkeroptions-object","title":"addMarker(options) \u2192 <code>Object</code>","text":"<p>Adds a marker to the map.</p> <p>Kind: global function Returns: <code>Object</code> - - Instance of the added marker.  </p> Param Type Description options <code>Object</code> Options for the marker to add. options.text <code>string</code> Text content for the marker popup. options.options <code>Object</code> Marker options. options.coord <code>LngLatLike</code> Coordinates for placing the marker. options.textOffset <code>Object</code> Text offset for the marker popup. <p></p>"},{"location":"3.1.Funcions_doc/#addpopupoptions-coord-text-object","title":"addPopup(options, coord, text) \u2192 <code>Object</code>","text":"<p>Adds a popup to the map.</p> <p>Kind: global function Returns: <code>Object</code> - - Instance of the added popup.  </p> Param Type Description options <code>Object</code> Options for the popup to add. coord <code>LngLatLike</code> Coordinates for placing the popup. text <code>string</code> HTML content for the popup. <p></p>"},{"location":"3.1.Funcions_doc/#addfullscreen","title":"addFullScreen()","text":"<p>Adds a fullscreen control to the map.</p> <p>Kind: global function </p>"},{"location":"3.1.Funcions_doc/#addmenuitemname","title":"addMenuItem(name)","text":"<p>Adds a menu item with a checkbox for controlling the visibility of a layer on the map.</p> <p>Kind: global function  </p> Param Type Description name <code>string</code> The name of the layer corresponding to the menu item. <p></p>"},{"location":"3.1.Funcions_doc/#addlayertreeoptions","title":"addLayerTree(options)","text":"<p>Adds a layer tree to the map.</p> <p>Kind: global function  </p> Param Type Description options <code>Object</code> Options for the layer tree to add. options.features <code>Object</code> Features for the layer tree. options.id <code>string</code> Unique identifier for the layer tree. options.type <code>string</code> Type of layer tree ('geojson', 'raster', etc.). <p></p>"},{"location":"3.1.Funcions_doc/#createnavigationcontroloptions-position-object","title":"createNavigationControl(options, [position]) \u2192 <code>Object</code>","text":"<p>Creates a navigation control with the provided options.</p> <p>Kind: global function Returns: <code>Object</code> - - Instance of the created navigation control.  </p> Param Type Default Description options <code>Object</code> Options for the navigation control. [position] <code>string</code> <code>\"'top-right'\"</code> Position to add the control on the map. <p></p>"},{"location":"3.1.Funcions_doc/#addnavigationcontroloptions-position","title":"addNavigationControl(options, [position])","text":"<p>Adds a navigation control to the map with the provided options.</p> <p>Kind: global function  </p> Param Type Default Description options <code>Object</code> Options for the navigation control. [position] <code>string</code> <code>\"'top-right'\"</code> Position to add the control on the map. <p></p>"},{"location":"3.1.Funcions_doc/#addattributioncontroloptions","title":"addAttributionControl(options)","text":"<p>Adds an attribution control to the map with the provided options.</p> <p>Kind: global function  </p> Param Type Description options <code>Object</code> Options for the attribution control. <p></p>"},{"location":"3.1.Funcions_doc/#_dealstylemapsname-string","title":"_dealStyleMaps(name) \u2192 <code>string</code>","text":"<p>Internal method to handle map styles.</p> <p>Kind: global function Returns: <code>string</code> - - URL of the map style.  </p> Param Type Description name <code>string</code> Name of the map style. <p></p>"},{"location":"3.1.Funcions_doc/#addimagelayericgcname-year","title":"addImageLayerICGC(name, year)","text":"<p>Adds an ICGC image layer to the map based on the specified name and year.</p> <p>Kind: global function  </p> Param Type Description name <code>string</code> The name of the layer. Mandatory. options: 'orto', 'geo', 'slope', 'dem', 'relleu', etc. year <code>integer</code> The year of the image layer (optional, applicable only for certain layers like 'orto'). <p></p>"},{"location":"3.1.Funcions_doc/#addvectorlayericgcurl-year","title":"addVectorLayerICGC(url, year)","text":"<p>Adds an ICGC vector layer to the map based on the specified name and year.</p> <p>Kind: global function  </p> Param Type Description url <code>string</code> The url of the vector layer. year <code>string</code> The year associated with the vector layer (optional). <p></p>"},{"location":"3.1.Funcions_doc/#addterrainicgcresolution-positionbutton","title":"addTerrainICGC(resolution, [positionButton])","text":"<p>Adds 3D terrain to the map using hillshade.</p> <p>Kind: global function  </p> Param Type Default Description resolution <code>string</code> resolution of the terrain data: 2m or 5m. [positionButton] <code>string</code> <code>\"'top-right'\"</code> Position to add the button on the map."},{"location":"faq/","title":"Faq","text":""},{"location":"faq/#descripcion","title":"Descripci\u00f3n","text":"<p>Nos han encargado realizar un mapa para visualizar edificios de Barcelona</p> <ul> <li> <p>Sabemos que la direccion Direccion General de Catastro ofrece servicio de descarga de edificios</p> <p>http://www.catastro.minhap.es/webinspire/index.html</p> </li> <li> <p>Sabemos tambi\u00e9n que existe un plugin de QGIS para hacer una descarga m\u00e1s f\u00e1cil el \"Spanish Inspire Catastral Downloader\"</p> </li> <li> <p>Mapbox.com nos ofrece opciones como servidor para hospedar y convertir datos a Vector-Tiles</p> </li> <li> <p>Mapbox tiene un estio mundial oscuro que tambi\u00e9n nos puede servir como fondo</p> <p>mapbox://styles/mapbox/dark-v10 </p> </li> <li> <p>En la specificaci\u00f3n de Style de Mapbox los pol\u00edgonos  tienen la propiedad \"paint\" \"fill-extrusion\" d\u00f3nde que puedo cambiar de color y extrudir geometrias por un valor de altura</p> <p>https://docs.mapbox.com/mapbox-gl-js/style-spec/#layers-fill-extrusion </p> </li> </ul>"},{"location":"faq/#paso-1-preparamos-datos","title":"Paso 1: Preparamos datos","text":"<p>Descargamos archivo ya convertido contrucciones.zip</p> <p>No guarde\u00eds el archivo dentro de /geoweb</p> <p>Si quisieramos preparar los datos o descargar otro municipio</p> <pre><code>* Podr\u00edamos descargar todas las construcciones de Barcelona (321 mil pol\u00edgonos) directamente de la Direccion General de Catastro [http://www.catastro.minhap.es/webinspire/index.html](http://www.catastro.minhap.es/webinspire/index.html){target=_blank}\n\n* Descargar\u00edamos los  datos [http://www.catastro.minhap.es/INSPIRE/Buildings/08/08900-BARCELONA/A.ES.SDGC.BU.08900.zip](http://www.catastro.minhap.es/INSPIRE/Buildings/08/08900-BARCELONA/A.ES.SDGC.BU.08900.zip) o utilizar\u00edamos QGIS + complemento \"Spanish Inspire Catastral Downloader\"\n\n* Convertir\u00edamos el archivo **A.ES.SDGC.BU.08900.buildingpart.gml** a SHP  \"contrucciones.shp\" con QGIS (coordenadas lat/lon EPSG:4326)\n</code></pre>"},{"location":"faq/#paso-2entramos-en-mapbboxcom-i-cargamos-los-datos","title":"Paso 2:Entramos en MapbBox.com i cargamos los datos","text":"<ul> <li> <p>Lo cargamos como Tileset dentro de MapBox, a\u00f1adimos contrucciones.zip SIN DESCOMPRIMIR</p> </li> <li> <p>Entramos en MapBox.com <code>Studio</code> --&gt; <code>Tilesets</code> --&gt;<code>New tileset</code> Arrastramos contrucciones.zip*</p> </li> <li> <p>Copiamos ID y nombre de la capa</p> </li> </ul> <p></p>"},{"location":"faq/#paso-3crear-edificioshtml","title":"Paso 3:Crear edificios.html","text":"<p>En este ejemplo y en adelante vamos a reutilizar el archivo css /geoweb/css/estilobase.css\" que existe ya en nuestro proyecto</p> <p>El archivo estilobase.css es este</p> <p><pre><code>            body {\n                margin: 0;\n            }\n\n            #map {\n                height: 100%;\n                width: 100%;\n                background-color: #ffffff\n            }\n</code></pre> * Vamos a VSCode y creamos el archivo edificios.html dentro de /geoweb</p> <pre><code>    &lt;html&gt;\n    &lt;head&gt;\n    &lt;meta charset='utf-8' /&gt;\n    &lt;title&gt;Edificios&lt;/title&gt;\n    &lt;meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' /&gt;\n    &lt;script src='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js'&gt;&lt;/script&gt;\n    &lt;link href='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css' rel='stylesheet' /&gt;\n    &lt;link href='css/estilobase.css' rel='stylesheet' /&gt;\n\n\n    &lt;script&gt;\n        //A\u00f1adir vuestor token y/o estilo !!\n        var map;\n        function init() {\n            mapboxgl.accessToken =\n                'pk.eyJ1IjoiZ2lzbWFzdGVybTIiLCJhIjoiY2plZHhubTQxMTNoYzMza3Rqa3kxYTdrOCJ9.53B1E6mKD_EQOVb2Y0-SsA';\n             map = new mapboxgl.Map({\n                container: 'map',\n                style: 'mapbox://styles/mapbox/dark-v10',\n                center: [2.16859, 41.3954],\n                zoom: 15,\n                attributionControl: false,\n                pitch: 45,\n                hash: true\n            });\n\n            map.addControl(new mapboxgl.AttributionControl({ compact: true }));\n            map.addControl(new mapboxgl.NavigationControl());\n\n        } // final init\n    &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body onload=\"init()\"&gt;\n\n        &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;/body&gt;\n\n    &lt;/html&gt;\n</code></pre>"},{"location":"faq/#paso-4-creamos-archivo-js","title":"Paso 4: Creamos archivo JS","text":"<ul> <li> <p>Dentro de nuestro directorio /geoweb/js/ creamos el archivo edificios.js, d\u00f3nde crearemos funciones especificas de nuestro proyecto  </p> </li> <li> <p>Creamos la funci\u00f3n addEdificiosCapa()</p> </li> </ul> <p>Necesitamos saber mapbox://nuestro ID i   \"source-layer\": nombre de Tileset en Mapbox Studio!!</p> <p>Para a\u00f1adir datos a nuestros mapas</p> <p>En mapbox tendremos que especificar siempre :</p> <p>map.addSource()  el tipo de dato fuente</p> <p>map.addLayer() d\u00f3nde se va a denifir como renderizar los datos</p> <p>https://docs.mapbox.com/mapbox-gl-js/style-spec/sources/ https://docs.mapbox.com/mapbox-gl-js/style-spec/layers/</p> <pre><code>  function addEdificiosCapa() {\n\n    map.addSource(\"edificios_source\", {\n        \"type\": \"vector\",\n        \"url\": \"mapbox://gismasterm2.500eaqlm\"  // mapbox://Nuestor ID Tileset\n\n    }); //fin map source\n\n\n    map.addLayer({\n    \"id\": \"edificios\",\n    \"type\": \"fill-extrusion\",\n    \"source\": \"edificios_source\",\n    \"source-layer\": \"construcciones-3f5iwq\", // Nuestro nombre Tileset\n    \"maxzoom\": 21,\n    \"minzoom\": 15,\n   // \"filter\": [\"&gt;\", \"numberOfFl\", 0],\n    \"paint\": {\n        \"fill-extrusion-color\": [\n            \"interpolate\", [\"linear\"], [\"number\", [\"get\", \"numberOfFl\"]],\n            0, \"#FFFFFF\",\n            1, \"#e6b03d\",\n            3, \"#e6b03d\",\n            6, \"#3de66d\",\n            9, \"#3de6b1\",\n            12, \"#22ecf0\",\n            15, \"#14b1fd\",\n            20, \"#3d73e6\",\n            40, \"#123a8f\",\n            80, \"#ce2f7e\",\n            100, \"transparent\"\n\n        ],\n        \"fill-extrusion-height\": [\"*\", 2, [\"to-number\", [\"get\", \"numberOfFl\"]]],\n        \"fill-extrusion-opacity\": 0.9\n    }\n}\n//,\"road-label\"\n);  \n\n} //fin funcion\n</code></pre>"},{"location":"faq/#paso-4-llamamos-funciones-en-el-evento-load-de-map","title":"Paso 4: Llamamos funciones en el evento load de map","text":"<ul> <li> <p>Llamamos al archivo javascript js/edificios.js</p> </li> <li> <p>Llamamos a la funci\u00f3n addEdificiosCapa() dentro del evento map.on(\"load\")</p> </li> </ul> <pre><code>    &lt;html&gt;\n\n    &lt;head&gt;\n    &lt;meta charset='utf-8' /&gt;\n    &lt;title&gt;Edificios&lt;/title&gt;\n    &lt;meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' /&gt;\n    &lt;script src='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js'&gt;&lt;/script&gt;\n    &lt;link href='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css' rel='stylesheet' /&gt;\n    &lt;link href='css/estilobase.css' rel='stylesheet' /&gt;\n\n    &lt;script src='js/edificios.js'&gt;&lt;/script&gt;\n    &lt;script&gt;\n        //A\u00f1adir vuestor token y/o estilo !!\n        var map;\n        function init() {\n            mapboxgl.accessToken =\n                'pk.eyJ1IjoiZ2lzbWFzdGVybTIiLCJhIjoiY2plZHhubTQxMTNoYzMza3Rqa3kxYTdrOCJ9.53B1E6mKD_EQOVb2Y0-SsA';\n             map = new mapboxgl.Map({\n                container: 'map',\n                style: 'mapbox://styles/mapbox/dark-v10',\n                center: [2.16859, 41.3954],\n                zoom: 15,\n                attributionControl: false,\n                pitch: 45,\n                hash: true\n            });\n\n            map.addControl(new mapboxgl.AttributionControl({ compact: true }));\n            map.addControl(new mapboxgl.NavigationControl());\n\n            map.on('load', function () {\n\n                addEdificiosCapa();\n\n\n             }); //fin onload\n\n        } // final init\n    &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body onload=\"init()\"&gt;\n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;/body&gt;\n\n    &lt;/html&gt;\n</code></pre> <p>visualizamos el mapa</p> <p>Descomentamos filtro y orden de capas para una mejor visualizaci\u00f3n en edificios.js \u00bfQue ha cambiado?</p> <pre><code>  function addEdificiosCapa() {\n\n    map.addSource(\"edificios_source\", {\n        \"type\": \"vector\",\n        \"url\": \"mapbox://gismasterm2.500eaqlm\"  // mapbox://Nuestor ID Tileset\n\n    }); //fin map source\n\n\n    map.addLayer({\n    \"id\": \"edificios\",\n    \"type\": \"fill-extrusion\",\n    \"source\": \"edificios_source\",\n    \"source-layer\": \"construcciones-3f5iwq\", // Nuestro nombre Tileset\n    \"maxzoom\": 21,\n    \"minzoom\": 15,\n    \"filter\": [\"&gt;\", \"numberOfFl\", 0],\n    \"paint\": {\n        \"fill-extrusion-color\": [\n            \"interpolate\", [\"linear\"], [\"number\", [\"get\", \"numberOfFl\"]],\n            0, \"#FFFFFF\",\n            1, \"#e6b03d\",\n            3, \"#e6b03d\",\n            6, \"#3de66d\",\n            9, \"#3de6b1\",\n            12, \"#22ecf0\",\n            15, \"#14b1fd\",\n            20, \"#3d73e6\",\n            40, \"#123a8f\",\n            80, \"#ce2f7e\",\n            100, \"transparent\"\n\n        ],\n        \"fill-extrusion-height\": [\"*\", 2, [\"to-number\", [\"get\", \"numberOfFl\"]]],\n        \"fill-extrusion-opacity\": 0.9\n    }\n}\n,\"road-label\"\n);  \n\n} //fin funcion\n</code></pre>"},{"location":"faq/#paso-5-opciones-de-filtro","title":"Paso 5: Opciones de filtro","text":"<ul> <li> <p>Vamos a crear una funcionalidad para filtrar edificios seg\u00fan su n\u00famero de pisos</p> </li> <li> <p>Creamos un elementos HTML de tipo <code>input:range</code> para poder filtrar</p> </li> </ul> <p>Programamos funciones fuera del mapa!!</p> <pre><code>    &lt;html&gt;\n\n    &lt;head&gt;\n    &lt;meta charset='utf-8' /&gt;\n    &lt;title&gt;Edificios&lt;/title&gt;\n    &lt;meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' /&gt;\n    &lt;script src='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js'&gt;&lt;/script&gt;\n    &lt;link href='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css' rel='stylesheet' /&gt;\n    &lt;link href='css/estilobase.css' rel='stylesheet' /&gt;\n\n    &lt;script src='js/edificios.js'&gt;&lt;/script&gt;\n    &lt;script&gt;\n        //A\u00f1adir vuestor token y/o estilo !!\n        var map;\n        function init() {\n            mapboxgl.accessToken =\n                'pk.eyJ1IjoiZ2lzbWFzdGVybTIiLCJhIjoiY2plZHhubTQxMTNoYzMza3Rqa3kxYTdrOCJ9.53B1E6mKD_EQOVb2Y0-SsA';\n             map = new mapboxgl.Map({\n                container: 'map',\n                style: 'mapbox://styles/mapbox/dark-v10',\n                center: [2.16859, 41.3954],\n                zoom: 15,\n                attributionControl: false,\n                pitch: 45,\n                hash: true\n            });\n\n            map.addControl(new mapboxgl.AttributionControl({ compact: true }));\n            map.addControl(new mapboxgl.NavigationControl());\n\n            map.on('load', function () {\n\n                addEdificiosCapa();\n\n\n             }); //fin onload\n\n        } // final init\n    &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body onload=\"init()\"&gt;\n    &lt;div class=\"panelTopIzquierda\"&gt;\n\n        &lt;label id=\"altura\"&gt;M\u00e1s de 0 pisos&lt;/label&gt;\n        &lt;input id=\"slider\" type=\"range\" min=\"1\" max=\"50\" step=\"1\" value=\"0\" /&gt;\n    &lt;/div&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;/body&gt;\n\n    &lt;/html&gt;\n</code></pre> <ul> <li>A\u00f1adimos a estilobase.css las siguientes clases</li> </ul> <pre><code>.panelTopIzquierda {\n    position: absolute;\n    top: 18px;\n    left: 20px;\n    width: 200px;\n    z-index: 1000;\n    background-color: rgba(255,255,255,0.9);\n    padding: 10px;\n    font-size: 20px;\n    color: #33333;\n    border-radius: 5px;\n}\n\n.panelTopIzquierda label{\n    font-size:0.85em;\n}\n\n.panelTopIzquierda input[type=range]{\n    cursor:pointer;\n    width: 95%;\n}\n</code></pre>"},{"location":"faq/#paso-6-funcion-de-filtro","title":"Paso 6: Funci\u00f3n de filtro","text":"<ul> <li>A\u00f1adimos a  edificios.js la funcion filtrarEdificios()</li> </ul> <pre><code>    function filtrarEdificios(valor) {\n        map.setFilter(\"edificios\", [\"&gt;\", \"numberOfFl\", parseInt(valor)]);\n\n        document.getElementById(\"altura\").innerHTML = \"M\u00e1s de  &lt;b&gt;\" + valor + \"&lt;/b&gt; pisos\";\n\n    }\n</code></pre>"},{"location":"faq/#paso-7-evento-onchange","title":"Paso 7: Evento onChange","text":"<ul> <li>LLamamos a la funci\u00f3n de desde el evento <code>onChange</code> del objeto input de HTML</li> </ul> <pre><code>    &lt;html&gt;\n\n    &lt;head&gt;\n    &lt;meta charset='utf-8' /&gt;\n    &lt;title&gt;Edificios&lt;/title&gt;\n    &lt;meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' /&gt;\n    &lt;script src='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js'&gt;&lt;/script&gt;\n    &lt;link href='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css' rel='stylesheet' /&gt;\n    &lt;link href='css/estilobase.css' rel='stylesheet' /&gt;\n    &lt;script src='js/utils.js'&gt;&lt;/script&gt;\n    &lt;script src='js/edificios.js'&gt;&lt;/script&gt;\n    &lt;script&gt;\n        //A\u00f1adir vuestor token y/o estilo !!\n        var map;\n        function init() {\n            mapboxgl.accessToken =\n                'pk.eyJ1IjoiZ2lzbWFzdGVybTIiLCJhIjoiY2plZHhubTQxMTNoYzMza3Rqa3kxYTdrOCJ9.53B1E6mKD_EQOVb2Y0-SsA';\n             map = new mapboxgl.Map({\n                container: 'map',\n                style: 'mapbox://styles/mapbox/dark-v10',\n                center: [2.16859, 41.3954],\n                zoom: 15,\n                attributionControl: false,\n                pitch: 45,\n                hash: true\n            });\n\n            map.addControl(new mapboxgl.AttributionControl({ compact: true }));\n            map.addControl(new mapboxgl.NavigationControl());\n\n            map.on('load', function () {\n\n                addEdificiosCapa();\n\n                addPopupToMap(\"edificios\");\n             }); //fin onload\n\n        } // final init\n    &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body onload=\"init()\"&gt;\n    &lt;div class=\"panelTopIzquierda\"&gt;\n\n       &lt;label id=\"altura\"&gt;M\u00e1s de 0 pisos&lt;/label&gt;\n        &lt;input  onChange=\"filtrarEdificios(this.value)\" id=\"slider\" type=\"range\" min=\"1\" max=\"50\" step=\"1\" value=\"0\" /&gt;\n    &lt;/div&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;/body&gt;\n\n    &lt;/html&gt;\n</code></pre>"},{"location":"faq/#paso-8-eventos-click-i-popup","title":"Paso 8: Eventos Click i popup","text":"<p>Nuevas posibilidades de mapbox</p> <p>https://docs.mapbox.com/mapbox-gl-js/api/map/#map.event:click</p> <p>https://docs.mapbox.com/mapbox-gl-js/api/markers/#popup</p> <p>A\u00f1adir funcion Popup personalizado dentro de edificios.js</p> <pre><code>function addPopupToMapEdificios(nombreCapa) {\n\n    map.on('click', nombreCapa, function (e) {\n\n        var text = \"\";\n        //console.info(e);\n        for (key in e.features[0].properties) {\n\n            if (key == \"numberOfFl\") {\n                text += \"&lt;b&gt;Numero de plantas&lt;/b&gt;:\" + e.features[0].properties[key] + \"&lt;br&gt;\";\n            }\n            if (key == \"localId\") {\n                //localId 0004702DF3800C_part1\n                //http://ovc.catastro.meh.es/OVCServWeb/OVCWcfLibres/OVCFotoFachada.svc/RecuperarFotoFachadaGet?ReferenciaCatastral=0004701DF3800C\n                //https://www1.sedecatastro.gob.es/CYCBienInmueble/OVCListaBienes.aspx?rc1=0004701&amp;rc2=DF3800C\n\n                var localId = e.features[0].properties[key];\n\n                var localIdSplit = localId.split(\"_\"); // 0004702DF3800C  part1\n                var parte1 = localIdSplit[0].substring(0, 7);\n                var parte2 = localIdSplit[0].substring(7, localIdSplit[0].length);\n                text += \"&lt;img width=200 src=http://ovc.catastro.meh.es/OVCServWeb/OVCWcfLibres/OVCFotoFachada.svc/RecuperarFotoFachadaGet?ReferenciaCatastral=\" + localId + \"&gt;&lt;br&gt;\";\n                text += \"&lt;a target=blank href=https://www1.sedecatastro.gob.es/CYCBienInmueble/OVCListaBienes.aspx?rc1=\" + parte1 + \"&amp;rc2=\" + parte2 + \"&gt;Ficha&lt;/a&gt;&lt;br&gt;\";\n\n            }\n\n\n        }\n        new mapboxgl.Popup()\n            .setLngLat(e.lngLat)\n            .setHTML(text)\n            .addTo(map);\n\n    });\n\n    map.on('mouseenter', nombreCapa, function () {\n        map.getCanvas().style.cursor = 'pointer';\n    });\n\n    map.on('mouseleave', nombreCapa, function () {\n        map.getCanvas().style.cursor = '';\n    });\n\n}\n</code></pre>"},{"location":"faq/#paso-9-llamamos-funcion-addpopuptomapedificios","title":"Paso 9: Llamamos funci\u00f3n addPopupToMapEdificios","text":"<ul> <li>LLamamos a la funci\u00f3n de desde el evento <code>load</code> del mapa</li> </ul> <pre><code>    &lt;html&gt;\n\n    &lt;head&gt;\n    &lt;meta charset='utf-8' /&gt;\n    &lt;title&gt;Edificios&lt;/title&gt;\n    &lt;meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' /&gt;\n    &lt;script src='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js'&gt;&lt;/script&gt;\n    &lt;link href='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css' rel='stylesheet' /&gt;\n    &lt;link href='css/estilobase.css' rel='stylesheet' /&gt;\n    &lt;script src='js/utils.js'&gt;&lt;/script&gt;\n    &lt;script src='js/edificios.js'&gt;&lt;/script&gt;\n    &lt;script&gt;\n        //A\u00f1adir vuestor token y/o estilo !!\n        var map;\n        function init() {\n            mapboxgl.accessToken =\n                'pk.eyJ1IjoiZ2lzbWFzdGVybTIiLCJhIjoiY2plZHhubTQxMTNoYzMza3Rqa3kxYTdrOCJ9.53B1E6mKD_EQOVb2Y0-SsA';\n             map = new mapboxgl.Map({\n                container: 'map',\n                style: 'mapbox://styles/mapbox/dark-v10',\n                center: [2.16859, 41.3954],\n                zoom: 15,\n                attributionControl: false,\n                pitch: 45,\n                hash: true\n            });\n\n            map.addControl(new mapboxgl.AttributionControl({ compact: true }));\n            map.addControl(new mapboxgl.NavigationControl());\n\n            map.on('load', function () {\n\n                addEdificiosCapa();\n\n                addPopupToMapEdificios(\"edificios\");\n             }); //fin onload\n\n        } // final init\n    &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body onload=\"init()\"&gt;\n    &lt;div class=\"panelTopIzquierda\"&gt;\n\n       &lt;label id=\"altura\"&gt;M\u00e1s de 0 pisos&lt;/label&gt;\n        &lt;input  onChange=\"filtrarEdificios(this.value)\" id=\"slider\" type=\"range\" min=\"1\" max=\"50\" step=\"1\" value=\"0\" /&gt;\n    &lt;/div&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;/body&gt;\n\n    &lt;/html&gt;\n</code></pre> <p>Visualizamos mapa</p> <p></p> <p>Geocodificador Mapbox GL  https://github.com/mapbox/mapbox-gl-geocoder/blob/master/API.md</p> <pre><code>    &lt;html&gt;\n\n    &lt;head&gt;\n    &lt;meta charset='utf-8' /&gt;\n    &lt;title&gt;Edificios&lt;/title&gt;\n    &lt;meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' /&gt;\n    &lt;script src='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js'&gt;&lt;/script&gt;\n    &lt;link href='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css' rel='stylesheet' /&gt;\n   &lt;script src=\"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js\"&gt;&lt;/script&gt;\n&lt;link rel=\"stylesheet\" href=\"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css\" type=\"text/css\"&gt;\n    &lt;link href='css/estilobase.css' rel='stylesheet' /&gt;\n\n    &lt;script src='js/edificios.js'&gt;&lt;/script&gt;\n    &lt;script&gt;\n        //A\u00f1adir vuestor token y/o estilo !!\n        var map;\n        function init() {\n            mapboxgl.accessToken =\n                'pk.eyJ1IjoiZ2lzbWFzdGVybTIiLCJhIjoiY2plZHhubTQxMTNoYzMza3Rqa3kxYTdrOCJ9.53B1E6mKD_EQOVb2Y0-SsA';\n             map = new mapboxgl.Map({\n                container: 'map',\n                style: 'mapbox://styles/mapbox/dark-v10',\n                center: [2.16859, 41.3954],\n                zoom: 15,\n                attributionControl: false,\n                pitch: 45,\n                hash: true\n            });\n\n            map.addControl(new mapboxgl.AttributionControl({ compact: true }));\n            map.addControl(new mapboxgl.NavigationControl());\n\n            map.addControl(\n                new MapboxGeocoder({\n                accessToken: mapboxgl.accessToken,\n                mapboxgl: mapboxgl\n                }));\n\n            map.on('load', function () {\n\n                addEdificiosCapa();\n\n                addPopupToMapEdificios(\"edificios\");\n             }); //fin onload\n\n        } // final init\n    &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body onload=\"init()\"&gt;\n   &lt;div class=\"panelTopIzquierda\"&gt;\n\n       &lt;label id=\"altura\"&gt;M\u00e1s de 0 pisos&lt;/label&gt;\n        &lt;input  onChange=\"filtrarEdificios(this.value)\" id=\"slider\" type=\"range\" min=\"1\" max=\"50\" step=\"1\" value=\"0\" /&gt;\n    &lt;/div&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;/body&gt;\n\n    &lt;/html&gt;\n</code></pre> <p>Miramos opciones de Geocoder. \u00bfLimit\u00e1mos b\u00fasquedas del geocoder por caja de coordenadas de Barcelona?</p> <p>https://github.com/mapbox/mapbox-gl-geocoder/blob/main/API.md</p> <p><code>bbox:[2.1066 , 41.3000 , 2.2536 , 41.4468]</code></p> <p>\u00bfPonemos t\u00edtulo?</p> <p>\u00bfEditamos index.html y subimos el ejemplo al GitHub?</p> <pre><code>    git pull\n    git add .\n    git commit -m \"visor catastro\"\n    git push\n</code></pre>"},{"location":"faq/#saber-mas","title":"Saber m\u00e1s..","text":"<p>Forma reactiva de hacer lo mismo en el evento onchange</p> <pre><code> document.getElementById(\"slider\").onchange = function() {\n\n                filtrarEdificios(this.value)\n            }\n</code></pre> <p>Activar/ desactivar capa via c\u00f3digo</p> <pre><code>    map.setLayoutProperty(\"edificios\", \"visibility\", \"visible\");\n    map.setLayoutProperty(\"edificios\", \"visibility\", \"none\");\n</code></pre> <p>desactivar capas cuyo id contenga 'label'</p> <pre><code>            for (var i=0; i &lt; map.getStyle().layers.length;i++){\n\n                    if(map.getStyle().layers[i].id.indexOf(\"label\")!=-1){\n\n                        map.setLayoutProperty(map.getStyle().layers[i].id, \"visibility\", \"none\");\n                    }\n\n                }\n</code></pre>"},{"location":"faq/#nivel-avanzado","title":"Nivel avanzado..","text":"<ul> <li>Podemos programas el evento click sobre el mapa y no sobre una capa conresta, obtener los vectores de todas las capas y filtrar por la capa que nos interesa.</li> <li>La funci\u00f3n addPopupToMapEdificios quedaria as\u00ed y funcionaria en 2d c\u00f3mo en 3d</li> </ul> <pre><code>    function addPopupToMapEdificios(nombreCapa) {\n\n    map.on('click', function (e) {\n\n        var text = \"\";\n        var bbox = [[e.point.x - 10, e.point.y - 10], [e.point.x + 10, e.point.y + 10]];\n        var features = map.queryRenderedFeatures(bbox, { layers: [nombreCapa] });\n\n        if (features.length &gt; 0) {\n            for (key in features[0].properties) {\n\n                if (key == \"numberOfFl\") {\n                    text += \"&lt;b&gt;Numero de plantas&lt;/b&gt;:\" + features[0].properties[key] + \"&lt;br&gt;\";\n                }\n                if (key == \"localId\") {\n                    //localId 0004702DF3800C_part1\n                    //http://ovc.catastro.meh.es/OVCServWeb/OVCWcfLibres/OVCFotoFachada.svc/RecuperarFotoFachadaGet?ReferenciaCatastral=0004701DF3800C\n                    //https://www1.sedecatastro.gob.es/CYCBienInmueble/OVCListaBienes.aspx?rc1=0004701&amp;rc2=DF3800C\n\n                    var localId = features[0].properties[key];\n\n                    var localIdSplit = localId.split(\"_\"); // 0004702DF3800C  part1\n                    var parte1 = localIdSplit[0].substring(0, 7);\n                    var parte2 = localIdSplit[0].substring(7, localIdSplit[0].length);\n                    text += \"&lt;img width=200 src=http://ovc.catastro.meh.es/OVCServWeb/OVCWcfLibres/OVCFotoFachada.svc/RecuperarFotoFachadaGet?ReferenciaCatastral=\" + localId + \"&gt;&lt;br&gt;\";\n                    text += \"&lt;a target=blank href=https://www1.sedecatastro.gob.es/CYCBienInmueble/OVCListaBienes.aspx?rc1=\" + parte1 + \"&amp;rc2=\" + parte2 + \"&gt;Ficha&lt;/a&gt;&lt;br&gt;\";\n\n                }\n\n\n            }\n            new mapboxgl.Popup()\n                .setLngLat(e.lngLat)\n                .setHTML(text)\n                .addTo(map);\n        }\n\n    });\n\n    map.on('mouseenter', nombreCapa, function () {\n        map.getCanvas().style.cursor = 'pointer';\n    });\n\n    map.on('mouseleave', nombreCapa, function () {\n        map.getCanvas().style.cursor = '';\n    });\n\n}\n</code></pre>"}]}